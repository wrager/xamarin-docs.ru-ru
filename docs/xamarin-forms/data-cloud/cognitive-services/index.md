---
title: "Добавление логики операций со службами Когнитивных"
description: "Когнитивных Майкрософт — это набор API-интерфейсов, пакеты SDK и службы, доступные разработчикам, чтобы сделать свои приложения более разумно, добавляя такие возможности, например распознавание лиц, распознавание речи и основные сведения о языке. В этой статье содержатся вводные примера приложения, который демонстрирует вызов некоторых Когнитивных API службы Майкрософт."
ms.topic: article
ms.prod: xamarin
ms.assetid: 74121ADB-1322-4C1E-A103-F37257BC7CB0
ms.technology: xamarin-forms
author: davidbritch
ms.author: dabritch
ms.date: 02/08/2017
ms.openlocfilehash: 650f8dceebb088b3601c21c1f5373fc4ae8c76dc
ms.sourcegitcommit: 61f5ecc5a2b5dcfbefdef91664d7460c0ee2f357
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/28/2018
---
# <a name="adding-intelligence-with-cognitive-services"></a>Добавление логики операций со службами Когнитивных

_Когнитивных Майкрософт — это набор API-интерфейсов, пакеты SDK и службы, доступные разработчикам, чтобы сделать свои приложения более разумно, добавляя такие возможности, например распознавание лиц, распознавание речи и основные сведения о языке. В этой статье содержатся вводные примера приложения, который демонстрирует вызов некоторых Когнитивных API службы Майкрософт._

## <a name="overview"></a>Обзор

Образец сопутствующие представляет приложения списка задач, которая предоставляет функциональные возможности для:

- Просмотр списка задач.
- Добавление и изменение задач через Экранная клавиатура или путем выполнения распознавания речи с API Bing речи. Дополнительные сведения о выполнении распознавания речи см. в разделе [распознавания речи, с помощью API речь Bing](speech-recognition.md).
- Написано с помощью API проверки правописания Bing задач по проверке. Дополнительные сведения см. в разделе [проверки орфографии, с помощью API проверки правописания Bing](spell-check.md).
- Перевод задач из английский, немецкий язык, с помощью API преобразователь. Дополнительные сведения см. в разделе [перевод текста с помощью API переводчик](text-translation.md).
- Удаление задач.
- Задайте состояние задания на «Готово».
- Интенсивность приложения с распознаванием эмоций, с помощью API эмоций —. Дополнительные сведения см. в разделе [распознавания эмоций — с помощью API эмоций —](emotion-recognition.md).

Задания хранятся в локальной базе данных SQLite. Дополнительные сведения об использовании локальной базы данных SQLite см. в разделе [работа с локальной базы данных](~/xamarin-forms/app-fundamentals/databases.md).

`TodoListPage` Отображается при запуске приложения. Эта страница отображается список всех задач, которые хранятся в локальной базе данных и позволяет пользователю создать новую задачу или оценка приложения:

![](images/sample-application-1.png "TodoListPage")

Новые элементы, которые могут быть созданы, щелкнув  *+*  кнопку, которая переходит к `TodoItemPage`. Эту страницу можно также перейти, выбрав задачу:

![](images/sample-application-2.png "TodoItemPage")

`TodoItemPage` Позволяет задачам создаваться, редактирование, проверка орфографии преобразуется, сохранен или удален. Распознавание речи может использоваться для создания или изменения задачи. Это достигается, нажав кнопку микрофон, чтобы начать запись и нажав кнопку же еще раз остановка записи, который отправляет записи в API распознавания речи Bing.

Нажав на кнопку smilies `TodoListPage` переходит к `RateAppPage`, который используется для выполнения распознавания эмоций — на изображении выражения лица:

![](images/sample-application-3.png "RateAppPage")

`RateAppPage` Позволяет пользователю выполнять фотографию их лицо, отправивший API эмоций — с возвращаемой эмоций, который будет отображаться.

## <a name="understanding-the-application-anatomy"></a>Основные сведения о структуре приложения

Проекта переносимой библиотеки классов (PCL) для образца приложения состоит из пяти основных папках.

<table>
    <thead>
        <tr><td><strong>Folder</strong></td><td><strong>Назначение</strong></td></tr>
    </thead>
    <tbody>
        <tr>
            <td><strong>Модели</strong></td>
            <td>Классы модели данных для приложения. Сюда входят <code>TodoItem</code> класс, который моделирует один элемент данных, используемых приложением. Папка также содержит классы, используемые для ответов JSON модели, возвращенных другой Microsoft Когнитивных API-интерфейсы службы.</td>
        </tr>
        <tr>
            <td><strong>Репозитории</strong></td>
                        <td>Содержит <code>ITodoItemRepository</code> интерфейс и <code>TodoItemRepository</code> класс, который используется для выполнения операций с базой данных.</td>
        </tr>
        <tr>
            <td><strong>Службы</strong></td>
                        <td>Содержит интерфейсы и классы, используемые для доступа к другой Microsoft Когнитивных API-интерфейсы службы, вместе с интерфейсами, которые используются в <code>DependencyService</code> для нахождения классы, реализующие интерфейсы в проектах платформы.</td>
        </tr>
        <tr>
            <td><strong>Средства</strong></td>
            <td>Содержит <code>Timer</code> класс, который используется <code>AuthenticationService</code> класса, чтобы продлить токен доступа JWT минутам 9.</td>
        </tr>
        <tr>
            <td><strong>Представления</strong></td>
            <td>Содержит страницы для приложения.</td>
        </tr>
    </tbody>
</table>

Проект переносимой библиотеки Классов содержит также некоторые важные файлы:

<table>
    <thead>
      <tr><td><strong>Файл</strong></td><td><strong>Назначение</strong></td></tr>
    <thead>
    <tbody>
        <tr>
            <td><strong>Constants.cs</strong></td>
            <td><code>Constants</code> Класса, определяющего ключи API и конечных точек для Microsoft Когнитивных службы API, которые вызываются. Константы ключа API требуется обновление для доступа к другой Когнитивных API службы.
        </tr>
        <tr>
          <td><strong>App.xaml.cs</strong></td>
          <td><code>App</code> Класс отвечает за создание экземпляров обоих первой страницы, отображаемый приложением на каждой из платформ, и <code>TodoManager</code> класс, используемый для вызова операций базы данных.</td>
        </tr>
    </tbody>
</table>

### <a name="nuget-packages"></a>Пакеты NuGet

В примере приложения используется следующие пакеты NuGet:

- `Microsoft.Net.Http` — предоставляет `HttpClient` класса для выполнения запросов по протоколу HTTP.
- `Newtonsoft.Json` — Инфраструктура JSON для .NET.
- `Microsoft.ProjectOxford.Emotion` — Клиентская библиотека для доступа к API эмоций —.
- `PCLStorage` — предоставляет набор межплатформенных локальный файл API ввода-ВЫВОДА.
- `sqlite-net-pcl` — обеспечивает хранение базы данных SQLite.
- `Xam.Plugin.Media` — обеспечивает создание кросс платформенных фотографий и комплектации API-интерфейсы.

Кроме того эти пакеты NuGet также установить собственные зависимости.

### <a name="modeling-the-data"></a>Моделирование данных

В примере приложения используется `TodoItem` класса для моделирования данных, отображаются и хранятся в локальной базе данных SQLite. Следующий пример кода демонстрирует класс `TodoItem`:

```csharp
public class TodoItem
{
  [PrimaryKey, AutoIncrement]
  public int ID { get; set; }
  public string Name { get; set; }
  public bool Done { get; set; }
}
```

`ID` Свойство используется для уникальной идентификации каждого `TodoItem` экземпляр сервера и снабжен атрибутами SQLite, свойство первичного ключа с автоматическим приращением в базе данных.

### <a name="invoking-database-operations"></a>Вызов операций базы данных

`TodoItemRepository` Класс реализует операции с базой данных, а экземпляр класса может осуществляться через `App.TodoManager` свойство. `TodoItemRepository` Класс предоставляет следующие методы для вызова операций базы данных:

- **GetAllItemsAsync** — извлекает все элементы из локальной базы данных SQLite.
- **GetItemAsync** — Извлекает указанный элемент из локальной базы данных SQLite.
- **SaveItemAsync** — создает или обновляет элемент в локальной базе данных SQLite.
- **DeleteItemAsync** — Удаляет указанный элемент из локальной базы данных SQLite.

### <a name="platform-project-implementations"></a>Реализации платформы проекта

`Services` Содержимое папки в проект PCL `IFileHelper` и `IAudioRecorderService` интерфейсы, используемые `DependencyService` для нахождения классы, реализующие интерфейсы в проектах платформы.

`IFileHelper` Интерфейс реализуется `FileHelper` класса в каждом проекте платформы. Этот класс состоит из одного метода `GetLocalFilePath`, который возвращает путь к локальному файлу для хранения базы данных SQLite.

`IAudioRecorderService` Интерфейс реализуется `AudioRecorderService` класса в каждом проекте платформы. Этот класс состоит из `StartRecording`, `StopRecording`и вспомогательные методы, которые можно использовать API платформы записывать звук с микрофона устройства и их сохранения в формате WAV-файла. На iOS `AudioRecorderService` использует `AVFoundation` API для записи звука. В Android `AudioRecordService` использует `AudioRecord` API для записи звука. В универсальной платформы Windows (UWP), `AudioRecorderService` использует `AudioGraph` API для записи звука.

### <a name="invoking-cognitive-services"></a>Вызов Когнитивных служб

Образец приложения вызывает службу Когнитивных корпорации Майкрософт:

- Речь Bing API. Дополнительные сведения см. в разделе [распознавания речи, с помощью API речь Bing](speech-recognition.md).
- Проверки правописания Bing API. Дополнительные сведения см. в разделе [проверки орфографии, с помощью API проверки правописания Bing](spell-check.md).
- Перевод API. Дополнительные сведения см. в разделе [перевод текста с помощью API переводчик](text-translation.md).
- API эмоций —. Дополнительные сведения см. в разделе [распознавания эмоций — с помощью API эмоций —](emotion-recognition.md).


## <a name="related-links"></a>Связанные ссылки

- [Документация Microsoft Когнитивных служб](https://www.microsoft.com/cognitive-services/documentation)
- [TODO Когнитивных службы (пример)](https://developer.xamarin.com/samples/xamarin-forms/WebServices/TodoCognitiveServices/)
