---
title: MessagingCenter
description: Xamarin.Forms включает простую службу обмена сообщениями для отправки и получения сообщений.
ms.prod: xamarin
ms.assetid: EDFE7B19-C5FD-40D5-816C-FAE56532E885
ms.technology: xamarin-forms
author: davidbritch
ms.author: dabritch
ms.date: 07/01/2016
ms.openlocfilehash: e8145847f3c91683aa7433208d70198998cda87f
ms.sourcegitcommit: 945df041e2180cb20af08b83cc703ecd1aedc6b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/04/2018
---
# <a name="messagingcenter"></a>MessagingCenter

_Xamarin.Forms включает простую службу обмена сообщениями для отправки и получения сообщений._

<a name="Overview" />

## <a name="overview"></a>Обзор

Xamarin.Forms `MessagingCenter` позволяет просматривать модели и другие компоненты для взаимодействия с даже не зная ничего о друг с другом помимо простого контракта сообщения.

<a name="How_the_MessagingCenter_Works" />

## <a name="how-the-messagingcenter-works"></a>Как работает MessagingCenter

Состоит из двух частей `MessagingCenter`:

-  **Подписка** - прослушивания сообщений с использования определенной сигнатуры и выполнения некоторых операций при их получении. Несколько подписчиков могут осуществлять прослушивание для того же сообщения.
-  **Отправить** -публикации для прослушивателей для обработки сообщения. Если нет слушателей подписаны сообщения будут проигнорированы.


`MessagingService` Является статическим классом с `Subscribe` и `Send` методы, которые используются в решении.

Сообщения имеют строка `message` параметр, используемый в качестве способа *адрес* сообщений. `Subscribe` И `Send` методы использовать универсальные параметры для последующего управления как сообщения доставляются — два сообщения с тем же `message` текст, но разных универсальных аргументов типа не будут доставляться в тот же подписчик.

API-Интерфейс для `MessagingCenter` проста:

-  Подписка&lt;TSender > (объект подписчика, строковое сообщение, действие&lt;TSender > обратного вызова, TSender источника = null)
-  Подписка&lt;TSender, TArgs > (объект подписчика, строковое сообщение, действие&lt;TSender, TArgs > обратного вызова, TSender источника = null)
-  Отправить&lt;TSender > (TSender отправителя, строковое сообщение)
-  Отправить&lt;TSender, TArgs > (TSender отправителя, строковое сообщение TArgs args)
-  Отмена подписки&lt;TSender, TArgs > (объект подписчика, строковое сообщение)
-  Отмена подписки&lt;TSender > (объект подписчика, строковое сообщение)


Эти методы описаны ниже.

<a name="Using_the_MessagingCenter" />

## <a name="using-the-messagingcenter"></a>С помощью MessagingCenter

Сообщения могут отправляться в результате взаимодействия с пользователем (например, нажатие кнопки), системных событий (например, элементы управления, изменения состояния) или других инцидента (например, для завершения асинхронной операции загрузки). Подписчики могут прослушивает изменить внешний вид пользовательского интерфейса, сохранить данные или запустить другой операции.

### <a name="simple-string-message"></a>Простое строковое сообщение

Простейший сообщение содержит только строки в `message` параметра. Объект `Subscribe` метод, *прослушивает* для простого строкового сообщения отображаются под - Обратите внимание, универсальный тип, отправитель должен иметь тип `MainPage`. Все классы в решении могут подписываться на сообщения, используя следующий синтаксис:

```csharp
MessagingCenter.Subscribe<MainPage> (this, "Hi", (sender) => {
    // do something whenever the "Hi" message is sent
});
```

В `MainPage` класса следующим кодом *отправляет* сообщения. `this` Параметр является экземпляром класса `MainPage`.

```csharp
MessagingCenter.Send<MainPage> (this, "Hi");
```

Строка не изменяется - указывает *тип сообщений* и используется для определения, какие подписчики на уведомления. Такого рода сообщения используется для указания того, некоторые произошедшее событие, например «передачу завершено», где требуется без подробных сведений.

### <a name="passing-an-argument"></a>Передача аргументов

Чтобы передать аргумент с сообщением, следует указать аргумент типа в `Subscribe` универсальных аргументов и в сигнатуре действия.

```csharp
MessagingCenter.Subscribe<MainPage, string> (this, "Hi", (sender, arg) => {
    // do something whenever the "Hi" message is sent
    // using the 'arg' parameter which is a string
});
```

Чтобы отправить сообщение с аргументом, включите параметр универсального типа и значение аргумента в `Send` вызова метода.

```csharp
MessagingCenter.Send<MainPage, string> (this, "Hi", "John");
```

Этот простой пример использует `string` можно передать аргумент, но любой объект C#.

### <a name="unsubscribe"></a>Отмена подписки

Объект отказаться от получения подпись сообщения, чтобы будущие сообщения не были доставлены. `Unsubscribe` Синтаксис метода должны отражать подписи сообщения (поэтому может потребоваться включить параметр универсального типа в аргументе сообщения).

```csharp
MessagingCenter.Unsubscribe<MainPage> (this, "Hi");
MessagingCenter.Unsubscribe<MainPage, string> (this, "Hi");
```

<a name="Summary" />

## <a name="summary"></a>Сводка

MessagingCenter — простой способ сократить соединения, особенно между Просмотр моделей. Он может использоваться для отправки и получения сообщений простой или передать аргумент между классами. Классы должны отменять подписку на сообщения, которые больше не хотите получать.


## <a name="related-links"></a>Связанные ссылки

- [MessagingCenterSample](https://developer.xamarin.com/samples/UsingMessagingCenter)
- [Примеры Xamarin.Forms](https://github.com/xamarin/xamarin-forms-samples)
