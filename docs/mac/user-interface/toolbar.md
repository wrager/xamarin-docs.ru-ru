---
title: "Панели инструментов"
description: "В этой статье описывает работу с панели инструментов в приложении Xamarin.Mac. В нем описывается создание и обслуживание панелей инструментов в Xcode и интерфейс построитель, представив их в код и работа с ними программным способом."
ms.topic: article
ms.prod: xamarin
ms.assetid: C8D228CE-C860-47E1-85FD-69864BF91F20
ms.technology: xamarin-mac
author: bradumbaugh
ms.author: brumbaug
ms.date: 03/14/2017
ms.openlocfilehash: 92b90f8d4655ea89b67e81f3235b6fd9b6d92833
ms.sourcegitcommit: 30055c534d9caf5dffcfdeafd6f08e666fb870a8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/09/2018
---
# <a name="toolbars"></a>Панели инструментов

_В этой статье описывает работу с панели инструментов в приложении Xamarin.Mac. В нем описывается создание и обслуживание панелей инструментов в Xcode и интерфейс построитель, представив их в код и работа с ними программным способом._

Xamarin.Mac разработчиков, работающих с Visual Studio для Mac имеют доступ к таким же контролем пользовательского интерфейса, доступные разработчикам macOS, работа с Xcode, включая панели инструментов. Поскольку Xamarin.Mac напрямую интегрируется с Xcode, можно использовать для создания и обслуживания элементов панели инструментов построителя интерфейса в Xcode. Эти элементы панели инструментов также могут создаваться в C#.

Панели инструментов в macOS добавляются в верхней части окна и обеспечивают легкий доступ к командам, относящиеся к его функциональность. Панели инструментов можно скрывать, показано или настройки конечным пользователем приложения и элементы панели инструментов может быть представлен различными способами.

В этой статье рассматриваются основы работы с панелями инструментов и элементы панели инструментов в приложении Xamarin.Mac. 

Прежде чем продолжить, прочтите [Hello, Mac](~/mac/get-started/hello-mac.md) статьи — в частности [введение в Xcode и интерфейс построителя](~/mac/get-started/hello-mac.md#Introduction_to_Xcode_and_Interface_Builder) и [выходов и действия](~/mac/get-started/hello-mac.md#Outlets_and_Actions) разделы — как рассматриваются основные понятия и методы, которые будут использоваться в этом руководстве.

Также ознакомьтесь с [предоставление C# классы и методы для Objective-C](~/mac/internals/how-it-works.md) раздел [Xamarin.Mac внутренние компоненты](~/mac/internals/how-it-works.md) документа. Объясняется, какие `Register` и `Export` атрибуты, используемые для подключения C# классы для Objective-C-классы.

## <a name="introduction-to-toolbars"></a>Общие сведения о панели инструментов

Любое окно в приложении macOS можно включить панель инструментов:

![Пример окна с панелью инструментов](toolbar-images/info01.png "пример окна с панели инструментов")

Панели инструментов обеспечивают простой способ для пользователей приложения быстро осуществлять доступ к важным или часто используемых функций. Например приложения, изменения документов предоставить элементы панели инструментов для задания цвета текста, изменения шрифта или напечатать текущий документ.

Панели инструментов можно отобразить элементы тремя способами:

1. **Значок и текст** 

     ![Панель инструментов с значки и текст](toolbar-images/info02.png "значки и текст на панели инструментов")

2. **Значок текста** 

     ![Только для значок панели инструментов](toolbar-images/info03.png "только для значок панели инструментов")

3. **Только текст** 

     ![Панель инструментов текстовыми](toolbar-images/info04.png "только текст панели инструментов")

Переключаться между этих режимов, щелкнув правой кнопкой мыши панель инструментов и выбрав режим отображения из контекстного меню.

![Контекстное меню для панели инструментов](toolbar-images/info05.png "контекстное меню для панели инструментов")

Для отображения панели инструментов с меньшим размером используйте то же меню:

![Панель инструментов с маленькими значками](toolbar-images/info06.png "мелких значков на панели инструментов")

Меню также позволяет Настройка панели инструментов:

![Диалоговое окно используется для настройки панели инструментов](toolbar-images/info07.png "диалоговое окно используется для настройки панели инструментов")

При настройке панели инструментов в построителе интерфейса в Xcode, разработчик может предоставить элементы дополнительных инструментов, которые не являются частью конфигурации по умолчанию. Пользователи приложения можно настроить панель инструментов, добавление и удаление этих предопределенных элементов при необходимости. Конечно панели инструментов можно сбросить конфигурацию по умолчанию.

Панель инструментов автоматически подключается к **представление** меню, которая дает пользователям возможность скрыть его, отображать их и изменить ее:

![Элементы панели инструментов в меню "Вид"](toolbar-images/info08.png "элементам, связанным с панели инструментов в меню "Вид"")

В разделе [встроенные функции меню](~/mac/user-interface/menu.md) документации для получения дополнительных сведений.

Кроме того при правильной настройке панели инструментов в построителе интерфейс приложения автоматически будут сохраняться Настройка панели инструментов между несколькими запускает приложение.

В следующих разделах данного руководства описывается, как создавать и поддерживать панели инструментов с помощью построителя интерфейс Xcode и способы работы с ними в коде.

## <a name="setting-a-custom-main-window-controller"></a>Установка контроллера пользовательских главное окно

Чтобы предоставить элементы пользовательского интерфейса для кода C# посредством выходов и действий, Xamarin.Mac приложения необходимо использовать контроллер пользовательского окна:

1. Открытие раскадровки приложения в построителе интерфейса в Xcode.
2. Выберите окно контроллер в рабочей области конструирования.
3. Переключитесь в **удостоверение инспектора** и введите «WindowController» в качестве **имя класса**: 

    [![Задание имени пользовательского класса контроллера окна](toolbar-images/windowcontroller01.png "имя пользовательского класса контроллера окна")](toolbar-images/windowcontroller01-large.png#lightbox) 

4. Сохранить изменения и вернуться в Visual Studio для Mac для синхронизации.
5. Объект **WindowController.cs** файл будет добавлен в проект в **Pad решения** в Visual Studio для Mac: 

    ![При выборе WindowController.cs на планшете решения](toolbar-images/windowcontroller02.png "выбора WindowController.cs на планшете решения")

6. Снова откройте раскадровки в построителе интерфейса в Xcode.
7. **WindowController.h** файл будет доступен для использования: 

    [![Файл WindowController.h](toolbar-images/windowcontroller03.png "WindowController.h файла")](toolbar-images/windowcontroller03-large.png#lightbox)

## <a name="creating-and-maintaining-toolbars-in-xcode"></a>Создание и обслуживание панелей инструментов в Xcode

Панели инструментов создаются и настраиваются с помощью построителя интерфейса в Xcode. Чтобы добавить панель инструментов приложения, изменять раскадровки основного приложения (в данном случае **Main.storyboard**), дважды щелкнув его в **Pad решение**:

![Открытие Main.storyboard на планшете решения](toolbar-images/edit01.png "Открытие Main.storyboard на планшете решения")

В **инспектора библиотеки**, введите «средства» в **поле поиска** для упрощения просмотреть все доступные элементы панели инструментов:

![Инспектор библиотеки отфильтровано для показа элементов панели инструментов](toolbar-images/edit02.png "инспектор библиотеки, отфильтровано для показа элементов панели инструментов")

Перетащите панель инструментов в окне в **редактор интерфейса**. С помощью панели инструментов, выбранной, настроить его поведение путем задания свойств в **атрибуты инспектора**:

![Инспектор атрибуты для панели инструментов](toolbar-images/edit04.png "инспектора атрибуты для панели инструментов")

Доступны следующие свойства.

1. **Отображение** -определяет, является ли на панели инструментов отображаются значки и текст
2. **Отображается при запуске** -, если панель инструментов отображается по умолчанию.
3. **Настраиваемые** -Если флажок установлен, пользователи могут изменять и настраивать панели инструментов.
4. **Разделитель** -Если флажок установлен, тонкой горизонтальной линии разделяет содержимое окна панели инструментов.
5. **Размер** -задает размер панели инструментов
6. **Эта функция** — Если выбран этот вариант, приложения должны сохраняться изменения конфигурации пользователя инструментов Запуск приложений.

Выберите **Автосохранение** вариант, оставив все остальные свойства со значениями по умолчанию. 

После открытия панели инструментов в **иерархии интерфейса**, откройте диалоговое окно настройки, выбрав элемент панели инструментов:

![Настройка панели инструментов](toolbar-images/edit05.png "Настройка панели инструментов")

Используйте это диалоговое окно для задания свойств для элементов, которые уже являются частью панели инструментов для разработки панели инструментов по умолчанию для приложения, и для предоставления дополнительных инструментов элементов пользователю выбрать при настройке панели инструментов. Чтобы добавить элементы на панель инструментов, перетащите их из **инспектора библиотеки**:

![Библиотека инспектора](toolbar-images/edit06.png "инспектора библиотеки")

Можно добавить следующие элементы панели инструментов:

- **Изображение элемента панели инструментов** -элемент панели инструментов с помощью пользовательского образа в виде значка.
- **Гибкий элемент панели инструментов места** -гибкие пространство, используемое для выравнивания элементов последующих панели инструментов. Например один или несколько элементов панели инструментов, а затем элемент панели инструментов места гибкие и другим элементом панели инструментов закрепляете последнего элемента справа от панели инструментов.
- **Элемент панели инструментов места** -фиксированной пространство между элементами, на панели инструментов
- **Элемент панели инструментов разделитель** -видимым разделитель между двумя или более элементов панели инструментов для группирования
- **Настройки панели инструментов элемента** -позволяет пользователям настраивать панели инструментов
- **Печать элемента панели инструментов** -позволяет пользователям печатать открытый документ
- **Отображение цвета элемента панели инструментов** -отображает стандартной системной палитры цветов: 

     ![Палитра цветов системы](toolbar-images/edit07.png "системной палитры цветов")

- **Отображение элемента панели инструментов шрифта** -отображает диалоговое окно стандартный системный шрифт: 

     ![Выбор шрифта](toolbar-images/edit08.png "выбора шрифта")

> [!IMPORTANT]
> Как можно будет увидеть более поздней версии, многие стандартные элементы управления пользовательского интерфейса Cocoa как поля поиска, сегментированных элементов управления и горизонтальной ползунки можно добавить на панель инструментов.

### <a name="adding-an-item-to-a-toolbar"></a>Добавление элемента панели инструментов

Чтобы добавить элемент на панель инструментов, выберите в панели инструментов **иерархии интерфейса** и выберите один из его элементов, в результате чего в диалоговом окне настройки для отображения. Затем перетащите элемент из **инспектора библиотеки** для **допускается элементы панели инструментов** области:

![Допускается элементы панели инструментов в диалоговом окне настройки панели инструментов](toolbar-images/add01.png "допускается элементы панели инструментов в диалоговом окне настройки панели инструментов")

Чтобы убедиться в том, что элемент является частью панели инструментов по умолчанию, перетащите его на **элементы панели инструментов по умолчанию** области: 

![Изменение порядка элемент панели инструментов, перетащив](toolbar-images/add02.png "переупорядочение, перетащив элемент панели инструментов")

Чтобы изменить порядок элементов панели инструментов по умолчанию, перетащите их влево или вправо.

Затем используйте **атрибуты инспектора** задавать свойства по умолчанию для элемента:

![Настройка элементов панели инструментов, с помощью инспектора атрибуты](toolbar-images/add03.png "Настройка элементов панели инструментов, с помощью инспектора атрибуты")

Доступны следующие свойства.

- **Имя изображения** -изображение, используемое в качестве значка для элемента
- **Метка** -текст, отображаемый для элемента на панели инструментов
- **Метка палитры** -текст, отображаемый для элемента в **допускается элементы панели инструментов** области
- **Тег** — необязательный, уникальный идентификатор, который помогает идентифицировать элемент в коде.
- **Идентификатор** -определяет тип элемента панели инструментов. Чтобы выбрать элемент панели инструментов в коде можно использовать пользовательское значение.
- **Можно выбрать** -Если этот флажок установлен, элемент будет функционировать как кнопка Вкл. / выкл.

> [!IMPORTANT]
> Добавить элемент к **допускается элементы панели инструментов** области, но не панели инструментов по умолчанию, чтобы указать параметры настройки для пользователей. 

### <a name="adding-other-ui-controls-to-a-toolbar"></a>Добавление других элементов управления пользовательского интерфейса на панель инструментов

Несколько элементов пользовательского интерфейса Cocoa, такие как поиск поля и Сегментированный элементы управления можно также добавить на панель инструментов.

Чтобы просмотреть это, откройте панель инструментов в **иерархии интерфейса** и выбрать элемент панели инструментов, чтобы открыть диалоговое окно настройки. Перетащите **поле поиска** из **инспектора библиотеки** для **допускается элементы панели инструментов** области:

![В диалоговом окне настройки панели инструментов с помощью](toolbar-images/add05.png "в диалоговом окне настройки панели инструментов")

Здесь используется построитель интерфейс Настройка поля поиска и предоставлять его в коде с помощью действия или выхода.

## <a name="built-in-toolbar-item-support"></a>Поддержка встроенной панели инструментов элемента

Некоторые элементы пользовательского интерфейса Cocoa взаимодействия с элементами стандартной панели инструментов по умолчанию. Например, перетащите **представления текста** на окно приложения и разместите его для заполнения области содержимого:

[![Добавление представления текста в приложение](toolbar-images/edit09.png "Добавление представления текста в приложение")](toolbar-images/edit09-large.png#lightbox)

Сохраните документ, вернитесь в Visual Studio для Mac для синхронизации с Xcode, запустите приложение, введите текст, выделите его и нажмите кнопку **цветов** элементом панели инструментов. Обратите внимание, что палитра цветов автоматически используется в текстовое представление:

![Функциональные возможности встроенной панели инструментов с помощью средства выбора текстового представления и цвет](toolbar-images/edit10.png "функциональные возможности встроенной панели инструментов с помощью средства выбора текстового представления и цвета")

## <a name="using-images-with-toolbar-items"></a>Использование изображений с элементы панели инструментов

С помощью **элементом панели инструментов изображения**, добавляемый растровое изображение **ресурсы** папку (и действие построения **пакета ресурсов**) могут отображаться на панели инструментов значок:

1. В Visual Studio для Mac в **Pad решения**, щелкните правой кнопкой мыши **ресурсов** папку и выберите **добавить** > **добавить файлы** .
2. Из **добавить файлы** диалоговом окне перейдите в нужный изображения, выберите их и нажмите кнопку **откройте** кнопки: 

    [![Выбор изображений, чтобы добавить](toolbar-images/edit11.png "выбор изображений для добавления")](toolbar-images/edit11-large.png#lightbox)

3. Выберите **копирования**, проверьте **использовать те же действия для всех выбранных файлов**и нажмите кнопку **ОК**:

    ![Выбрав действие копирования для добавленных изображений](toolbar-images/edit12.png "выбрав действие копирования для добавленных изображений")

4. В **Pad решения**, дважды щелкните **MainWindow.xib** чтобы открыть его в Xcode.

5. Выберите на панели инструментов в **иерархии интерфейса** и выберите один из его элементов, чтобы открыть диалоговое окно настройки.

6. Перетащите **элементом панели инструментов изображения** из **инспектора библиотеки** на панель инструментов **допускается элементы панели инструментов** области: 

    ![Добавить элемент панели инструментов изображения в допускается элементы панели инструментов области](toolbar-images/edit14.png "элементом панели инструментов изображения добавится в область допускается элементы панели инструментов")

7. В **атрибуты инспектора**, выберите образ, который был только что добавлен в Visual Studio для Mac: 

    ![Установка пользовательского изображения для элемента панели инструментов](toolbar-images/edit15.png "изображение пользовательский элемент панели инструментов")

8. Задать **метка** для «Корзины» и **меток палитры** «Стереть документ»: 

    ![Настройка панели инструментов элемент Label и меток палитры](toolbar-images/edit16.png "Настройка панели инструментов элемент Label и меток палитры")

9. Перетащите **элементом панели инструментов разделитель** из **инспектора библиотеки** на панель инструментов **допускается элементы панели инструментов** области: 

    [![Элемент панели инструментов разделитель добавится в область элементов панели инструментов допускается](toolbar-images/edit17.png "элементом панели инструментов разделитель добавится в область допускается элементы панели инструментов")](toolbar-images/edit17-large.png#lightbox)

10. Перетащите разделитель элемента и элемента «Корзины» **элементы панели инструментов по умолчанию** области и набора элементов заказа на панели инструментов с слева направо, следующим образом (цвета, шрифты, разделителя, корзины, гибкие пространство, Print): 

    ![Элементы панели инструментов по умолчанию](toolbar-images/edit18.png "элементы панели инструментов по умолчанию")

11. Сохраните изменения и вернуться в Visual Studio для Mac для синхронизации с Xcode.

Запустите приложение, чтобы убедиться, что новая панель инструментов отображается по умолчанию:

![Панель инструментов с элементами настроенный по умолчанию](toolbar-images/edit19.png "инструментов с элементами настроенный по умолчанию")

## <a name="exposing-toolbar-items-with-outlets-and-actions"></a>Предоставление доступа к элементы панели инструментов с выходов и действия

Чтобы получить доступ к панели инструментов или элементом панели инструментов в коде, он должен быть подключен к розетки или действие:

1. В **Pad решения**, дважды щелкните **Main.storyboard** чтобы открыть его в Xcode.
2. Убедитесь, что «WindowController» был назначен контроллеру главное окно, в пользовательском классе **удостоверение инспектора**:

    [![С помощью инспектора удостоверения для задания пользовательского класса контроллера окна](toolbar-images/edit20a.png "с помощью инспектора удостоверения для задания пользовательского класса контроллера окна")](toolbar-images/edit20a-large.png#lightbox)

3. Затем выберите элемент панели инструментов в **иерархии интерфейса**: 

    ![При выборе элемента панели инструментов в иерархии интерфейсов](toolbar-images/edit20.png "выбора элемента панели инструментов в иерархии интерфейсов")  

4. Откройте **помощника представление**выберите **WindowController.h** файл и перетащите элемент управления из панели инструментов элемента **WindowController.h** файла.
5. Задать **подключения** тип **действия**, введите «trashDocument» для **имя**и нажмите кнопку **Connect** кнопки: 

    [![Настройка действия для элемента панели инструментов](toolbar-images/edit23.png "Настройка действия для элемента панели инструментов")](toolbar-images/edit23-large.png#lightbox)

6. Предоставлять **представления текста** как розетки называется «documentEditor» **ViewController.h** файла: 

    [![Настройка выхода для представления текста](toolbar-images/edit24.png "Настройка выхода для текстового представления.")](toolbar-images/edit24-large.png#lightbox)

7. Сохранить изменения и вернуться в Visual Studio для Mac для синхронизации с Xcode.

В Visual Studio для Mac изменить **ViewController.cs** файл и добавьте следующий код:

```csharp
public void EraseDocument() {
    documentEditor.Value = "";
}
```

Далее следует изменить **WindowController.cs** и добавьте следующий код в конец файла `WindowController` класса:

```csharp
[Export ("trashDocument:")]
void TrashDocument (NSObject sender) {

    var controller = ContentViewController as ViewController;
    controller.EraseDocument ();
}
```

При запуске приложения, **корзины** элементом панели инструментов будет активна:

![На панели инструментов элемента Корзина active](toolbar-images/edit25.png "инструментов с элементом Корзина active")

Обратите внимание, что **корзины** элементом панели инструментов теперь можно использовать для удаления текста.

## <a name="disabling-toolbar-items"></a>Отключение элементов панели инструментов

Отключение элемента на панели инструментов, создание пользовательского `NSToolbarItem` класса и переопределить `Validate` метод. После этого в построителе интерфейс назначьте пользовательский тип элемента, который требуется включить или отключить.

Создание пользовательской `NSToolbarItem` класса, щелкните правой кнопкой мыши проект и выберите **добавить** > **новый файл...** . Выберите **Общие** > **пустым классом**, введите «ActivatableItem» для **имя**и нажмите кнопку **New** кнопки: 

![Добавление пустой класс в Visual Studio для Mac](toolbar-images/custom01.png "Добавление пустой класс в Visual Studio для Mac")

Далее следует изменить **ActivatableItem.cs** файла следующим образом:

```csharp
using System;

using Foundation;
using AppKit;

namespace MacToolbar
{
    [Register("ActivatableItem")]
    public class ActivatableItem : NSToolbarItem
    {
        public bool Active { get; set;} = true;

        public ActivatableItem ()
        {
        }

        public ActivatableItem (IntPtr handle) : base (handle)
        {
        }

        public ActivatableItem (NSObjectFlag  t) : base (t)
        {
        }

        public ActivatableItem (string title) : base (title)
        {
        }

        public override void Validate ()
        {
            base.Validate ();
            Enabled = Active;
        }
    }
}
```

Дважды щелкните **Main.storyboard** чтобы открыть его в Xcode. Выберите **корзины** элементом панели инструментов, созданная выше и изменение класса на «ActivatableItem» в **удостоверение инспектора**:

![Задание пользовательского класса для элемента панели инструментов](toolbar-images/custom02.png "задание пользовательского класса для элемента панели инструментов")

Создание выхода вызывается `trashItem` для **корзины** элементом панели инструментов. Сохраните изменения и вернуться в Visual Studio для Mac для синхронизации с Xcode. Наконец, откройте **MainWindow.cs** и обновить `AwakeFromNib` метод следующим образом:

```csharp
public override void AwakeFromNib ()
{
    base.AwakeFromNib ();

    // Disable trash
    trashItem.Active = false;
}
```

Запустите приложение и обратите внимание, что **корзины** элемент сейчас отключен в панели инструментов:

![На панели инструментов элемента неактивные корзины](toolbar-images/custom03.png "инструментов с элементом неактивные корзины")

## <a name="summary"></a>Сводка

Подробное описание работы с панелей инструментов и элементов в приложении Xamarin.Mac вступила в этой статье. Оно описано, как создавать и поддерживать панели инструментов в построителе интерфейса в Xcode, как некоторые элементы управления пользовательского интерфейса автоматически работают с элементы панели инструментов, как работать с панелью инструментов в коде C# и включение и отключение элементов панели инструментов.


## <a name="related-links"></a>Связанные ссылки

- [MacToolbar (пример)](https://developer.xamarin.com/samples/mac/MacToolbar/)
- [Привет, Mac](~/mac/get-started/hello-mac.md)
- [Правила пользовательского интерфейса для панели инструментов](https://developer.apple.com/macos/human-interface-guidelines/windows-and-views/toolbars/)
- [Общие сведения о панели инструментов](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Toolbars/Toolbars.html)
