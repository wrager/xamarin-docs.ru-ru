---
title: "Часть 3. Настройка перекрестной Xamarin платформы решения"
ms.topic: article
ms.prod: xamarin
ms.assetid: 4139A6C2-D477-C563-C1AB-98CCD0D10A93
ms.technology: xamarin-cross-platform
author: asb3993
ms.author: amburns
ms.date: 03/27/2017
ms.openlocfilehash: 60c82f9e0ea7b09195d45971af7292161f0b65cd
ms.sourcegitcommit: 8e722d72c5d1384889f70adb26c5675544897b1f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/15/2018
---
# <a name="part-3---setting-up-a-xamarin-cross-platform-solution"></a>Часть 3. Настройка перекрестной Xamarin платформы решения

Независимо от того, какие платформы используются, все проекты Xamarin используют один и тот же формат файла решения (Visual Studio **.sln** формат файла). Решения могут совместно использоваться сред разработки, даже в том случае, если не удается загрузить отдельные проекты (например, проект Windows в Visual Studio для Mac).



При создании новой платформы приложениями, первым шагом является создание пустого решения. В этом разделе, дальнейший ход событий: Настройка проектов для построения кросс-платформенные мобильные приложения.

 <a name="Sharing_Code" />


## <a name="sharing-code"></a>Совместное использование кода

Ссылаться на [варианты совместного использования кода](~/cross-platform/app-fundamentals/code-sharing.md) документа подробное описание реализации совместное использование кода между платформами.

 <a name="Shared_Asset_Projects" />


### <a name="shared-projects"></a>Общие проекты

Самый простой способ совместного использования файлов кода является использование [общий проект](~/cross-platform/app-fundamentals/shared-projects.md).

Этот метод позволяет совместно использовать тот же код в проектах для разных платформ и директивы компилятора можно использовать для включения пути другой, специфический для платформы кода.

 <a name="Portable_Class_Libraries" />


### <a name="portable-class-libraries-pcl"></a>Переносимые библиотеки классов (PCL)

Исторически файл проекта .NET (и получившуюся сборку) предназначено для версии конкретной платформы. Это предотвращает проект или сборку, совместно с различных платформ.

Переносимая библиотека классов (PCL) — это специальный тип проекта, который может использоваться в разнородных CLI платформ, таких как Xamarin.iOS и Xamarin.Android, а также WPF, универсальной платформы Windows и Xbox. Библиотеку можно использовать только подмножество полноценную платформу .NET, ограничивается целевой платформы.

Вы можете прочитать больше о Xamarin [поддержка переносимой библиотеки классов](~/cross-platform/app-fundamentals/pcl.md) и следуйте инструкциям в разделе как [TaskyPortable пример](https://github.com/xamarin/mobile-samples/tree/master/TaskyPortable) работает.


### <a name="net-standard"></a>.NET Standard

Появились в версии 2016 [.NET Standard](~/cross-platform/app-fundamentals/net-standard.md) проекты предоставляют простой способ совместно использовать код разных платформ, создание сборок, которые могут использоваться в Windows, Xamarin платформ (iOS, Android, Mac) и Linux.

.NET стандартные библиотеки можно создать и использовать как PCLs, за исключением того, более легко обнаружить API-интерфейсы, доступные в каждой версии (от 1.0 до версии 1.6), и каждая версия совместима с предыдущими номерами ниже версии.



 <a name="Populating_the_Solution" />


## <a name="populating-the-solution"></a>Заполнение решения

Независимо от того, какой метод используется для совместного использования кода Общая структура решения должны реализовывать многоуровневую архитектуру, которая способствует совместного использования кода.
Xamarin подход — код группы на два типа проектов:

-   **Основной проект** — написать код, доступных для использования в одном месте, для совместного использования на разных платформах. Позволяет скрыть детали реализации, по возможности принципы инкапсуляции.
-   **Проекты приложений платформой** — использование доступных для использования кода с как мало взаимозависимости максимально. На этом уровне, построенных на компоненты, предоставляемые в основной проект добавлены специфический для платформы функции.


 <a name="Core_Project" />


### <a name="core-project"></a>Основной проект

Проектов общего кода должны ссылаться только на сборки, которые доступны на всех платформах — т. е. как часто используемых пространств framework `System`, `System.Core` и `System.Xml`.

Общие проекты должны реализовывать меньше функциональных возможностей без пользовательского интерфейса, возможно, может включать в себя следующие уровни:

-   **Уровень данных** — код, обеспечивающий данных физического хранилища, например.  [SQLite NET](https://github.com/praeclarum/sqlite-net), альтернативной базы данных, например [Realm.io](https://realm.io/products/realm-mobile-database/) или даже XML-файлов. Классы слоев данных обычно используется только с уровня доступа к данным.
-   **Уровень доступа к данным** — определяет API, который поддерживает операции необходимые данные для использования функций приложения, таких как методы для доступа к списки данных, отдельные элементы данных, а также создавать, изменять и удалять их.
-   **Уровень доступа к службе** — дополнительный уровень для предоставления облачных служб в приложение. Содержит код, который обращается к ресурсам удаленной сети (веб-служб, образ загрузки, и т. д.) и возможно кэширование результатов.
-   **Бизнес-слое** — определение классов модели и оболочка или диспетчер классов, которые предоставляют функциональные возможности для конкретной платформы приложений.


 <a name="Platform-Specific_Application_Projects" />


### <a name="platform-specific-application-projects"></a>Проекты приложений платформой

Проекты под конкретные платформы должен ссылаться на сборки, необходимый для привязки к каждой platform SDK (Xamarin.iOS, Xamarin.Android, Xamarin.Mac или Windows), а также основные проекте с общим кодом.

Проекты под конкретные платформы должны реализовывать:

-   **Уровень приложения** — определенных функций платформы и привязки и преобразования между объектами бизнес-слое и пользовательский интерфейс.
-   **Уровень пользовательского интерфейса** — экраны, элементы управления пользовательского интерфейса, представление логику проверки.


<a name="Example" />


### <a name="example"></a>Пример

На этой диаграмме показана архитектура приложения.

 [ ![](setting-up-a-xamarin-cross-platform-solution-images/conceptualarchitecture.png "На этой диаграмме показано архитектура приложения")](setting-up-a-xamarin-cross-platform-solution-images/conceptualarchitecture.png#lightbox)

На этом снимке экрана показано установки решения с общим проектом Core, iOS и проекты приложения Android. Общий проект содержит код, связанный уровнях архитектуры (код бизнеса, службы, данных и доступа к данным):

 ![](setting-up-a-xamarin-cross-platform-solution-images/core-solution-example.png "Общий проект содержит код, связанный уровнях архитектуры (код бизнеса, службы, данных и доступа к данным)")


 <a name="Project_References" />


## <a name="project-references"></a>Ссылки проекта

Ссылки проекта отражать зависимости, для проекта. Основные проекты ограничить их ссылки на общие сборки, чтобы легко совместно использовать код.
Проекты приложений платформой ссылаются на общий код, а также других сборок специфический для платформы, необходимые для использования целевой платформы.

Проекты приложений ссылку на общий проект и содержать код пользовательского интерфейса, необходимый для присутствует функциональные возможности для пользователя, как показано на эти снимки экрана:

![](setting-up-a-xamarin-cross-platform-solution-images/solution-android.png "Приложение проекты каждой ссылки на общий проект") ![ ] (setting-up-a-xamarin-cross-platform-solution-images/solution-ios.png "приложение проекты каждой ссылки на общий проект")


Конкретные примеры структуру проекты указываются в конкретные случаи.

 <a name="Adding_Files" />


## <a name="adding-files"></a>Добавление файлов

 <a name="Build_Action" />


### <a name="build-action"></a>Действие при сборке

Важно присвоить правильное действие построения для определенных типов файлов. Этот список содержит действие построения для некоторых типов файлов:

-  **Все файлы C#** — действие при построении: компиляция
-   **Образы в Xamarin.iOS & Windows** — действие построения: содержимого
-   **Файлы XIB и раскадровки в Xamarin.iOS** — действие при построении: InterfaceDefinition
-   **Images и layouts AXML в Android** — действие при построении: AndroidResource
-  **XAML-файлов в проектах Windows** — действие при построении: страницы
-  **Файлы Xamarin.Forms XAML** — действие при построении: EmbeddedResource


Обычно обнаружит тип файла и предложит действие правильное построение интегрированной среды разработки.

 <a name="Case_Sensitivity" />


### <a name="case-sensitivity"></a>Учет регистра

Наконец помните, что некоторые платформы с учетом регистра файловых системах (например)
iOS и Android) Поэтому следует обязательно использовать стандарт именования файлов и убедитесь, что имена файлов, используемые в коде точно совпадать файловой системы. Это особенно важно для изображений и других ресурсов, которые можно ссылаться в коде.
