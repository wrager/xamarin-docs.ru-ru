---
title: "Оптимизированное Xamarin Android поддерживает v4 и пакеты NuGet v13"
ms.topic: article
ms.prod: xamarin
ms.assetid: FE66A82A-6C05-4646-BC52-E806F5DC606C
ms.technology: xamarin-android
author: mgmclemore
ms.author: mamcle
ms.date: 03/09/2018
ms.openlocfilehash: ab8d90ebd938a8417e5a48155347e03191ef9ca4
ms.sourcegitcommit: 0fdb243b46cf21be47584900805cadcd077121bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2018
---
# <a name="smarter-xamarin-android-support-v4--v13-nuget-packages"></a>Оптимизированное Xamarin Android поддерживает v4 и пакеты NuGet v13

## <a name="about-the-android-support-libraries"></a>О библиотеках поддержка Android

Google создал библиотеки поддержки для предоставления новых возможностей в более старых версиях Android. В общем случае библиотеки поддержки приведены номер версии в их имя, являющееся низкий уровень API Android они совместимы с (например: поддержка v4 может использоваться только в API уровня 4 и более поздней версии. Дополнительные сведения в этом [переполнения стека обсуждений](http://stackoverflow.com/questions/9926403/android-support-package-compatibility-library-use-v4-or-v13)). 

Два из библиотеки поддержки: `Support-v4` и `Support-v13` не могут использоваться вместе в одном приложении, то есть они являются взаимоисключающими. Это вызвано `Support-v13` фактически содержит все типы и реализации `Support-v4`. Если повторите и ссылаться на обоих в одном проекте возникнет повторяющийся тип ошибки.

## <a name="problems-with-referencing"></a>Проблемы при создании ссылок на

Поскольку `Support-v4` стала настолько популярной много библиотеки сторонних производителей теперь зависят от нее. Их можно выбрать вместо зависят поддержки v13, но это более часто зависят от _v4_ с момента, предоставляет все эти библиотеки сторонних производителей с помощью приложения возможность поддержки уровни API вплоть до 4.

Если оно ссылается на библиотеку Xamarin сторонних производителей `Xamarin.Android.Support.v4.dll` привязка к `Support-v4`, также должен ссылаться на любое приложение, которое использует эту библиотеку `Xamarin.Android.Support.v4.dll`. Это становится проблемой, если то же приложение также хочет использовать некоторые функции из `Xamarin.Android.Support.v13.dll` привязка к `Support-v13`. Если вы ссылаетесь обе привязки, возникнет повторяющийся тип ошибки.

## <a name="type-forwarded-v4-binding-assembly"></a>Переадресация типа v4 привязки сборки

Чтобы обойти эту проблему, мы создали особую `Xamarin.Android.Support.v4.dll` сборку, которая не имеет реализации, но просто `[assembly: TypeForwardedTo (..)]` атрибуты, которые пересылают все `Support-v4` типы для реализации в `Xamarin.Android.Support.v13.dll` сборки.

Это означает, что разработчик может ссылаться на этот _Переадресация типа_ сборки в свои приложения, которое будет удовлетворять ссылку на `Xamarin.Android.Support.v4.dll` по любой библиотеки сторонних производителей, по-прежнему предоставляя `Xamarin.Android.Support.v13.dll` для использования в приложении.

## <a name="nuget-assistance"></a>Помощь NuGet

При этом разработчик может вручную добавляют необходимые правильные ссылки, мы получаем доступ с помощью NuGet для выбора правильного блока (либо нормали _v4_ привязки или Переадресация типа _v4_ сборки) при устанавливается пакет NuGet.

Таким образом `Xamarin.Android.Support.v4` пакет NuGet теперь содержит следующую логику:

Если приложение предназначен для API-13 уровня (Gingerbread 3.2) или более поздней версии:

*   `Xamarin.Android.Support.v13` NuGet, автоматически добавляется как элемент dependency
*   _Переадресация типа_ `Xamarin.Android.Support.v4.dll` будет ссылаться в проекте

Если что-либо меньше, чем 13 уровня API предназначен приложения, вы получите нормали `Xamarin.Android.Support.v4.dll` привязки, на которые ссылается проект.

## <a name="do-i-have-to-use-support-v13"></a>Нужно ли использовать v13 поддержки?

Если приложение предназначен API уровня 13 или более поздней версии, и вы решили использовать `Xamarin Android Support-v4` пакет NuGet, то `Xamarin Android Support v13` пакет NuGet — требуемая зависимость.

Мы думаем, что оправдывает совместимости и меньшее количество проблем, это приводит к очень незначительное увеличение размера приложения (два файла .jar отличаются от 17 КБ).

Если вы являетесь adamant об использовании `Support-v4` в приложение, предназначенное для API уровня 13 или выше, чтобы всегда вручную загрузить `.nupkg`, извлеките его и ссылки на сборку.
