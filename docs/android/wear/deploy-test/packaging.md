---
title: Пакетирование износ приложений
ms.prod: xamarin
ms.assetid: E32DD855-78DD-46F8-B234-4EAC0756BDA2
ms.technology: xamarin-android
author: mgmclemore
ms.author: mamcle
ms.date: 02/02/2018
ms.openlocfilehash: af96c0f8cf862b7a208beb5b91ecbb30598b09d9
ms.sourcegitcommit: 945df041e2180cb20af08b83cc703ecd1aedc6b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/04/2018
---
# <a name="packaging-wear-apps"></a>Пакетирование износ приложений

Приложения Android износ упакованы с полной Android приложения для распространения на Google Play. 

## <a name="automatic-packaging"></a>Автоматическая упаковка

Начиная с Xamarin Android 5.0, износ приложения автоматически упакован как ресурс в приложении портативные при создании ссылку на проект в проект износ портативные проекта. Чтобы создать эту связь можно использовать следующие действия: 

# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

1. Если приложение износ уже не является частью портативные решения, щелкните правой кнопкой мыши узел решения и выберите **Добавить > Добавить существующий проект...** .

2. Перейдите к **.csproj** файл приложения одежды, выберите его и нажмите кнопку **откройте**. Проект приложения износ теперь должны быть видимыми в решении наладонные устройства.

3. Щелкните правой кнопкой мыши **ссылки** , а затем выберите **добавить ссылку**.

4. В **диспетчер ссылок** диалоговое окно, включите износ проекта (щелкните, чтобы установить соответствующий флажок), нажмите кнопку **ОК**.

5. Изменить имя пакета для проекта одежды, чтобы он соответствовал имени пакета портативные проекта (имя пакета можно изменить в разделе **свойства > манифеста Android**).

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

1. Если приложение износ уже не является частью портативные решения, щелкните правой кнопкой мыши узел решения и выберите **Добавить > Добавить существующий проект...** .

2. Перейдите к **.csproj** файл приложения одежды, выберите его и нажмите кнопку **откройте**. Проект приложения износ теперь должны быть видимыми в решении наладонные устройства.

3. Щелкните правой кнопкой мыши узел портативные проекта в решение, нажмите кнопку **изменить ссылки...** .

4. В **изменить ссылки** диалоговое окно, включите износ проекта (щелкните, чтобы установить соответствующий флажок), нажмите кнопку **ОК**.

5. Изменить имя пакета для проекта одежды, чтобы он соответствовал имени пакета портативные проекта (имя пакета можно изменить в разделе **параметры проекта > приложения Android**).

-----


Обратите внимание, что вы получите **XA5211** ошибки, если имя пакета приложения износ не соответствует имени пакета портативные приложения. Пример:

```shell
Error XA5211: Embedded wear app package name differs from handheld 
app package name (com.companyname.mywearapp != com.companyname.myapp). (XA5211)
```

Чтобы исправить эту ошибку, измените имя пакета приложения одежды, чтобы он соответствовал имени пакета портативные приложения.

При нажатии кнопки **сборки > собрать все**, автоматическая упаковка проекта износ в главный проект портативном компьютере (Phone) запускает эту связь. Износ приложения автоматически строится и включаются в качестве ресурсов в приложении наладонные устройства.

Сборки, которая создает проект приложения износ не используется как ссылку на сборку в проекте портативном компьютере (телефон). Вместо этого процесса построения выполняет следующие задачи.

-   Проверяет, что пакет имена соответствовали. 

-   Создает XML и добавляет его в портативные проект, чтобы связать его с приложением, износ. Пример: 

    ```xml
    <!-- Handheld (Phone) Project.csproj -->
    <ProjectReference Include="..\MyWearApp\MyWearApp.csproj">
        <Project>{D80E1FEF-653B-448C-B2AA-609C74E88340}</Project>
        <Name>MyWearApp</Name>
        <IsAppExtension>True</IsAppExtension>
    </ProjectReference>
    ```

-   Добавляет приложение износ как **необработанные** ресурсов портативные проект. 


## <a name="manual-packaging"></a>Упаковка вручную

Можно написать приложений Android с Xamarin.Android до версии 5.0, но необходимо выполнить эти инструкции вручную упаковки для распространения приложения: 

1. Убедитесь, что переносном проектов и проектов для карманных ПК (Phone) имеют одинаковые номер версии имя пакета.

2. Создание вручную переносном проект как **выпуска** сборки.

3. Вручную добавьте выпуска **. APK** из шага (2) в **ресурсы/raw** каталог проекта портативном компьютере (телефон).

4. Вручную добавить новый ресурс XML **Resources/xml/wearable_app_desc.xml** портативные проекта, который ссылается на переносной **APK** на шаге (3):

    ```xml
    <wearableApp package="wearable.app.package.name">
        <versionCode>1</versionCode>
        <versionName>1.0</versionName>
        <rawPathResId>NAME_OF_APK_FROM_STEP_3</rawPathResId>
    </wearableApp>
    ```

5. Вручную добавьте `<meta-data />` элемент в проект портативные **AndroidManifest.xml** `<application>` элемент, который ссылается на новый ресурс XML:

    ```xml
    <meta-data android:name="com.google.android.wearable.beta.app"
        android:resource="@xml/wearable_app_desc"/>
    ```

См. также сайта разработчика Android [инструкции вручную packging](https://developer.android.com/training/wearables/apps/packaging.html#PackageManually).

