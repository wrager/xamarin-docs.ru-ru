---
title: "Поставщики работают, как содержимого"
ms.topic: article
ms.prod: xamarin
ms.assetid: B9E2EF89-7EBE-45F5-1ED9-7D2C70BE792C
ms.technology: xamarin-android
author: mgmclemore
ms.author: mamcle
ms.date: 02/16/2018
ms.openlocfilehash: 7802988833563469fcc25e03ee1bda2046591681
ms.sourcegitcommit: 30055c534d9caf5dffcfdeafd6f08e666fb870a8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/09/2018
---
# <a name="how-content-providers-work"></a>Поставщики работают, как содержимого

Существует два класса, участвующих в `ContentProvider` взаимодействия:

- **Поставщик содержимого** &ndash; реализует интерфейс API, который предоставляет набор данных стандартным способом. Основные методы являются запроса, Insert, Update и Delete.

- **ContentResolver** &ndash; статического прокси-сервера, который обменивается данными с `ContentProvider` на доступ к данным, либо из внутри одного приложения или из другого приложения.

Поставщик содержимого обычно реализуется базу данных SQLite, но API-интерфейса означает, что код не требуются сведения о базовых SQL. Запросы выполняются через Uri с помощью констант для ссылок на имена столбцов (для уменьшения зависимостей от структуры данных) и `ICursor` возвращается для кода-потребителя для перебора.


## <a name="consuming-a-contentprovider"></a>Использует поставщик содержимого

`ContentProviders` предоставлять свою функциональность через Uri, который зарегистрирован в **AndroidManifest.xml** приложения, который публикует данные. Имеется соглашение, где Uri и столбцы данных, которые предоставляются должны быть доступны как константы, чтобы облегчить привязку к данным. Встроенные Android `ContentProviders` удобства классы обеспечивают константы, которые ссылаются на структуры данных в [ `Android.Providers` ](https://developer.xamarin.com/api/namespace/Android.Provider/) пространства имен.



### <a name="built-in-providers"></a>Встроенные поставщики

Android предоставляет доступ к широкому системы и данных пользователя с помощью `ContentProviders`:

- *Обозреватель* &ndash; закладки и журнал браузера (разрешение `READ_HISTORY_BOOKMARKS` или `WRITE_HISTORY_BOOKMARKS`).

- *CallLog* &ndash; последних вызовов произведен или получен с устройства.

- *Контакты* &ndash; подробные сведения из списка контактов пользователя, включая людей, телефоны, фото и группы.

- *MediaStore* &ndash; содержимое на устройстве пользователя: аудио (альбомы, исполнителей, жанров, списки воспроизведения), (включая эскизы) изображений и видео.

- *Параметры* &ndash; устройства системные параметры и настройки.

- *UserDictionary* &ndash; содержимого определяемых пользователем словаря, который используется для ввода текста, прогнозируемого.

- *Голосовая почта* &ndash; журнал голосовых сообщений.



## <a name="classes-overview"></a>Общие сведения о классах

Основной классы, используемые при работе с `ContentProvider` показано ниже:

[![Схема классов поставщика содержимого приложения и Consuming приложения взаимодействия](how-it-works-images/classdiagram1.png)](how-it-works-images/classdiagram1.png#lightbox)

На этой диаграмме `ContentProvider` реализует запросы и регистрирует для URI, используемый другими приложениями для поиска данных. `ContentResolver` Действует как прокси для `ContentProvider` (запроса, вставки, обновления и удаления методов). `SQLiteOpenHelper` Содержит данные, используемые `ContentProvider`, но она не предоставляется непосредственно используют приложения.
`CursorAdapter` Передает курсоре, возвращаемом процедурой `ContentResolver` для отображения в `ListView`. `UriMatcher` — Это вспомогательный класс, который анализирует идентификаторы URI, при обработке запросов.

Назначение каждого класса описан ниже.

- **Поставщик содержимого** &ndash; реализовать методы этого абстрактного класса для предоставления данных. API-Интерфейс становятся доступными для других классов и приложений через атрибут Uri, который добавляется к определению класса.

- **SQLiteOpenHelper** &ndash; помогает реализовать SQLite хранилище данных, представленного `ContentProvider`.

- **UriMatcher** &ndash; используйте `UriMatcher` в ваш `ContentProvider` реализацию для управления URI, которые используются для запроса содержимого.

- **ContentResolver** &ndash; код использует `ContentResolver` для доступа к `ContentProvider` экземпляра. Вместе эти два класса аккуратно проблем связи между процессами, что дает легко совместно использоваться приложениями. Код никогда не создает `ContentProvider` класса явным образом; вместо этого доступ к данным путем создания курсора, в зависимости от Uri, предоставляемые `ContentProvider` приложения.

- **CursorAdapter** &ndash; используйте `CursorAdapter` или `SimpleCursorAdapter` для отображения данных, доступ к ней через `ContentProvider`.

`ContentProvider` API позволяет пользователям выполнять различные операции с данными, такие как:

-  Запрос данных для возврата списков или отдельных записей.
-  Измените отдельные записи.
-  Добавление новых записей.
-  Удаление записей.

Этот документ содержит пример, использующий предоставляемой системой `ContentProvider`, а также простой пример только для чтения, который реализует пользовательский `ContentProvider`.

