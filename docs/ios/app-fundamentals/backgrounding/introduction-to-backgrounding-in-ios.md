---
title: "Общие сведения о Backgrounding в iOS"
ms.topic: article
ms.prod: xamarin
ms.assetid: E214F2C7-E74E-46C7-B5BA-080B30D61250
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.openlocfilehash: c0369fe52897a2557a92fd56ebcd816b8427faf7
ms.sourcegitcommit: 73bd0c7e5f237f0a1be70a6c1384309bb26609d5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2018
---
# <a name="introduction-to-backgrounding-in-ios"></a>Общие сведения о Backgrounding в iOS

iOS регулирует фоновой обработки очень тесно и предлагает три подхода к реализации:

-  **Зарегистрировать фоновую задачу** -Если приложению для выполнения важных задач, его можно попросить операций ввода-вывода не для того, чтобы прервать задачу переноса приложения в фоновом режиме. Например приложению может потребоваться завершить вход пользователя или завершения загрузки большого файла.
-  **Зарегистрировать в качестве фона необходимости приложения** -приложения можно зарегистрировать как конкретный тип приложения, которое имеет известные backgrounding особые требования, такие как *аудио* , *VoIP* ,  *Внешних аксессуаров* , *киоска новостей* , и *расположение* . Эти приложения могут непрерывная Фоновая обработка прав при условии, что они выполняют задачи, которые находятся в пределах параметров типа зарегистрированного приложения.
-  **Включить обновления в фоновом режиме** -приложений можно запускать обновления в фоновом режиме с *область наблюдения за* или прослушивание *значительные изменения расположения* . Начиная с версии iOS 7 приложения также могут регистрировать для обновления содержимого в фоновом режиме с помощью *выборки фона* или *удаленного уведомления* .


## <a name="application-states-and-application-delegate-methods"></a>Состояния приложения и приложения делегата методы

Прежде чем перейти к коду для фоновой обработки в iOS, необходимо понимать как backgrounding влияет на жизненный цикл приложения iOS.

Жизненный цикл приложений iOS — это совокупность состояния приложений и способы перемещения между ними. Приложение переходит между состояниями на основе поведения пользователя и backgrounding требованиям приложения. Перемещение проиллюстрирован на следующей схеме:

 [![](introduction-to-backgrounding-in-ios-images/applicationlifecycle-.png "Схема состояний приложения и приложения методов делегата")](introduction-to-backgrounding-in-ios-images/applicationlifecycle-.png#lightbox)

-  **Не работает** -приложение не было запущено на устройстве.
-  **Выполнение-активный** -приложение на экране и код выполняется на переднем плане.
-  **Неактивные** -приложение не будет прерван телефонный звонок, текст или другие прерывания.
-  **Backgrounded** -приложения перемещаются в фоновом режиме и продолжает выполнение фонового кода.
-  **SUSPENDED** — Если приложение не имеет никакой код для запуска в фоновом режиме, или если весь код завершен, приложение будет *Suspended* Операционной системой. Процесс приостановки приложения остается активным, но приложение не может выполнить любой код в этом состоянии.
-  **Вернуться к не запущена или остановки (Rare)** — иногда процесс приложения уничтожается и возвратом приложения к *не работает* состояния. Это происходит в ситуациях нехватки памяти или если пользователь вручную завершает работу приложения.


Когда появилась поддержка многозадачной редко завершает простоя приложения iOS, а напротив поддерживает процессы *Suspended* в памяти. Приложения процесс поддержания гарантирует приложение быстро запускается при очередном открытии. Это также означает приложений могут свободно перемещаться из *Suspended* состояния обратно в *Backgrounded* состояния без отображения системных ресурсов. iOS 7 может использовать эту функцию с помощью новых API, которые позволяют приложениям приостановить фоновые задачи, когда устройство переходит в спящий режим, обновление содержимому прямо в фоновом режиме без взаимодействия с пользователем и многое другое. Мы рассмотрим новых API в [Backgrounding методы iOS](~/ios/app-fundamentals/backgrounding/ios-backgrounding-techniques/index.md).

## <a name="application-lifecycle-methods"></a>Методы жизненного цикла приложения

При изменении состояния приложения iOS уведомляет приложение через методы событий в `AppDelegate` класса:

-  `OnActivated` -Это вызывается при первом запуске приложения, и каждый раз, приложение снова отображается на переднем плане. Это место для размещения кода, необходимо выполнять каждый раз при открытии приложения.
-  `OnResignActivation` -Если пользователь получает прерывания, таких как текст или телефонного звонка, этот метод вызывается, и приложение временно отключены. Должен пользователь принять телефонный звонок, приложение будет отправляться в фоновом режиме.
-  `DidEnterBackground` — Вызывается, когда приложение входит backgrounded состояния, этот метод обеспечивает следующие преимущества пять секунд для подготовки к возможное прекращение. Это время можно использовать для сохранения данных пользователя и задачи и удалить конфиденциальные сведения с экрана.
-  `WillEnterForeground` — Когда пользователь возвращает backgrounded или приостановленных приложение и запускает его на передний план `WillEnterForeground` вызывается. Это время для подготовки к приложению делать на переднем плане, восстановление любого состояния, сохраненный в процессе `DidEnterBackground` .  `OnActivated` сразу после завершения этого метода будет вызван.
-  `WillTerminate` -Выключите приложения и уничтожения его процесс. Этот метод возвращает вызывается только если многозадачной не доступен на устройстве или версия операционной системы при нехватке памяти, или если пользователь вручную завершает backgrounded приложения. Следует отметить, что приостановленных приложений, получение прервано будет не `WillTerminate` .


На следующей схеме показано, как состояния приложения и взаимодействия методов жизненного цикла:

 [![](introduction-to-backgrounding-in-ios-images/image2.png "На этой диаграмме показано, как состояния приложения и методов жизненного цикла взаимодействия")](introduction-to-backgrounding-in-ios-images/image2.png#lightbox)

## <a name="user-controls-for-backgrounding-in-ios"></a>Пользовательские элементы управления для Backgrounding в iOS

iOS 7 появились несколько возможностей для предоставления пользователям больший контроль над backgrounded состояния приложения. Оба переключателя приложения и фоновое обновление приложения влияет на жизненного цикла приложения.

### <a name="app-switcher"></a>Приложение переключателя

Приложение переключателя — важные управления функция, представленная в iOS 7. Оно запускается с двойного касания **Главная** кнопку и отображает приложения, процессы которого действительны:

 [![](introduction-to-backgrounding-in-ios-images/app-switcher-.png "Перемещение между приложениями с помощью переключателя приложения")](introduction-to-backgrounding-in-ios-images/app-switcher-.png#lightbox)

С помощью переключателя приложения, пользователи могут прокручивать моментальные снимки всех backgrounded и приостановленных приложений. Коснувшись приложение запускается на переднем плане. Экрану вверх удаляет приложение с заднего плана, его процесс прерывается. Использовано более подробно рассмотрим переключателя приложения в [Демонстрация жизненного цикла приложения iOS](~/ios/app-fundamentals/backgrounding/application-lifecycle-demo.md) в следующем разделе.

> [!IMPORTANT]
> Переключателя App не показывает разницу между backgrounded и приостановленных приложений.



### <a name="background-app-refresh-settings"></a>Параметры фона обновления приложения

iOS 7 повышает контроль над жизненным циклом приложений, позволяя пользователям отказаться от backgrounding для приложений [зарегистрирован для фоновой обработки](~/ios/app-fundamentals/backgrounding/ios-backgrounding-techniques/registering-applications-to-run-in-background.md). *Это не запрещает запуск фоновых задач приложений*.

Пользователи могут изменять этот параметр, перейдя к <span class="uiitem">параметры > Общие > фоновое обновление приложения</span> и редактирования backgrounding права доступа для выбранного приложения. Если фоновое обновление приложения имеет значение off, приложение будет приостановлен немедленно при входе в фоновом режиме, а запрещено сделать все фоновые задачи:

 [![](introduction-to-backgrounding-in-ios-images/settings-.png "Параметры фона обновления приложения")](introduction-to-backgrounding-in-ios-images/settings-.png#lightbox)

Разработчики могут проверить состояние фонового обновления приложения с `BackgroundRefreshStatus` API. Пример, см. в разделе [рецепт проверьте фоновый обновить параметр](https://developer.xamarin.com/recipes/ios/multitasking/check_background_refresh_setting/).

Мы рассмотрели основные принципы iOS жизненного цикла приложения и средства для управления жизненным циклом приложения. Теперь давайте посмотрим, жизненного цикла приложения iOS в действии.

