---
title: "iOS средства безопасности и конфиденциальности"
description: "В этой статье рассматривается работа с безопасностью и конфиденциальностью в iOS и как они влияют на приложения Xamarin.iOS."
ms.topic: article
ms.prod: xamarin
ms.assetid: 718C8721-C359-4650-878A-D68E159A3F53
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.date: 03/16/2017
ms.openlocfilehash: 4747fb73358a60d10832a1e650acd90a5a4274d1
ms.sourcegitcommit: 30055c534d9caf5dffcfdeafd6f08e666fb870a8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/09/2018
---
# <a name="ios-security-and-privacy-features"></a>iOS средства безопасности и конфиденциальности

_В этой статье рассматривается работа с безопасностью и конфиденциальностью в iOS и как они влияют на приложения Xamarin.iOS._

Представляет собой ряд дополнительных возможностей для безопасности и конфиденциальности в iOS 10 (и более поздней версии), которые помогут разработчику повысить безопасность приложений и обеспечить конфиденциальность пользователя Apple. В этой статье мы рассмотрим применение этих функций в приложения Xamarin.iOS.

Будут подробно рассмотрены следующие темы:

- [Общие улучшения](#General-Enhancements)
- [Доступ к данным пользователя Private](#Accessing-Private-User-Data)
    - [Ключи параметров конфиденциальности](#Setting-Privacy-Keys)
    
<a name="General-Enhancements" />

## <a name="general-enhancements"></a>Общие улучшения

Следующие общие изменения были внесены безопасности и конфиденциальности в iOS 10:

- Общие данные безопасности архитектуры (CDSA) интерфейс API рекомендуется к использованию и должны быть заменены с помощью SecKey API для создания асимметричных ключей.
- Новый `NSAllowsArbitraryLoadsInWebContent` ключ можно добавить в приложение `Info.plist` файл и позволит использовать веб-страницы правильно загрузить во время защиты безопасности транспорта Apple (ATS) все еще включена для остальной части приложения. Дополнительные сведения см. в разделе нашей [безопасность транспорта приложения](~/ios/app-fundamentals/ats.md) документации.
- Так как новый буфер обмена в iOS 10 и macOS Сьерра позволяет пользователю скопировать и вставить между устройствами, API была увеличена, чтобы разрешить буфера не должна превышать к определенному устройству и применит автоматически отключен в заданной точке. Кроме того именованные монтажных столах, более не сохраняются и должны быть заменены с общим контейнерам монтажном столе.
- Для всех подключений SSL/TLS симметричного шифрования RC4 теперь отключено по умолчанию. Кроме того API защиты транспорта больше не поддерживает SSLv3 и рекомендуется, разработчик остановить использование шифрования SHA-1 и 3DES как можно быстрее.

<a name="Accessing-Private-User-Data" />

## <a name="accessing-private-user-data"></a>Доступ к данным пользователя Private

Приложения, работающие на iOS 10 (или более поздней версии) необходимо объявлять статически их назначение для доступа к определенных функций или сведения о пользователе, указав один или несколько ключей конфиденциальности в их `Info.plist` файлы, в которых объясняется, почему приложению необходимо получить доступ пользователю.

> [!IMPORTANT]
> **Примечание** приложений, которые не удалось предоставить необходимые ключи автоматически завершается системой при попытке получить доступ к одному ограниченные возможности или сведения о пользователе, _без ошибок_! Если приложение запускается неожиданно завершаться с ошибкой на iOS 10, убедитесь, что все требуемые `Info.plist` были указаны.

Конфиденциальность следующие связанные ключи доступны:

- **Конфиденциальность - использование музыки Apple описание** (`NSAppleMusicUsageDescription`) — позволяет разработчику описывают, почему приложение хочет получить доступ к библиотеке мультимедиа для пользователя.
- **Конфиденциальность - периферийных Описание использования Bluetooth** (`NSBluetoothPeripheralUsageDescription`) — позволяет разработчику описывают, почему приложение хочет получить доступ к Bluetooth на устройстве пользователя.
- **Конфиденциальность - Описание использования календари** (`NSCalendarsUsageDescription`) — позволяет разработчику описывают, почему приложение хочет получить доступ к календарю пользователя.
- **Конфиденциальность - Описание использования камеры** (`NSCameraUsageDescription`) — позволяет разработчику описывают, почему приложение хочет получить доступ к камере устройства.
- **Конфиденциальность - Описание использования контактов** (`NSContactsUsageDescription`) — позволяет разработчику описывают, почему приложение хочет получить доступ к контактов пользователя.
- **Конфиденциальность - Описание использования общей папки работоспособности** (`NSHealthShareUsageDescription`) — позволяет разработчику описывают, почему приложение хочет получить доступ к работоспособности данных пользователя. Дополнительные сведения см. в разделе Apple [ссылку на класс HKHealthStore](https://developer.apple.com/reference/healthkit/hkhealthstore).
- **Конфиденциальность - Описание использования работоспособности обновления** (`NSHealthUpdateUsageDescription`) — позволяет разработчику описывают, почему приложение желает изменить данные состояния пользователя. Дополнительные сведения см. в разделе Apple [ссылку на класс HKHealthStore](https://developer.apple.com/reference/healthkit/hkhealthstore).
- **Конфиденциальность - Описание использования HomeKit** (`NSHomeKitUsageDescription`) — позволяет разработчику описывают, почему приложение хочет получить доступ к конфигурации HomeKit пользовательские данные.
- **Конфиденциальность - расположение всегда Описание использования** (`NSLocationAlwaysUsageDescription`) — позволяет разработчику описывают, почему приложение хочет всегда имеют доступ к расположению пользователя.
- [Устарело] **Конфиденциальность - Описание использования расположение** (`NSLocationUsageDescription`) — позволяет разработчику описывают, почему приложение хочет получить доступ к расположению пользователя. *Примечание: Этот ключ был объявлен устаревшим в iOS 8 (и выше). Используйте `NSLocationAlwaysUsageDescription` или `NSLocationWhenInUseUsageDescription` вместо него.*
- **Конфиденциальность - расположение при в используйте Описание использования** (`NSLocationWhenInUseUsageDescription`) — позволяет разработчику описывают, почему приложение хочет получить доступ к расположению пользователя, пока она запущена.
- [Устарело] **Конфиденциальность - Описание использования библиотеки мультимедиа** -позволяет разработчику описывают, почему приложение хочет получить доступ к библиотеке мультимедиа пользователя. *Примечание: Этот ключ был объявлен устаревшим в iOS 8 (и выше). Используйте `NSAppleMusicUsageDescription` вместо него.*
- **Конфиденциальность - Описание использования микрофон** (`NSMicrophoneUsageDescription`) — позволяет разработчику описывают, почему приложение хочет получить доступ к микрофону устройств.
- **Конфиденциальность - Описание использования движения** (`NSMotionUsageDescription`) — позволяет разработчику описывают, почему приложение хочет получить доступ к акселерометр устройства.
- **Конфиденциальность - Описание использования библиотеки фото** (`NSPhotoLibraryUsageDescription`) — позволяет разработчику описывают, почему приложение хочет получить доступ к библиотеке фотография пользователя.
- **Конфиденциальность - Описание использования напоминания** (`NSRemindersUsageDescription`) — позволяет разработчику описывают, почему приложение хочет получить доступ к напоминаний пользователя.
- **Конфиденциальность - Описание использования Siri** (`NSSiriUsageDescription`) — позволяет разработчику описывают, почему приложение желает передать данные пользователя для Siri.
- **Конфиденциальность - Описание использования распознавания речи** (`NSSpeechRecognitionUsageDescription`) — позволяет разработчику описывают, почему приложение желает передать данные пользователя на серверы распознавания речи компании Apple.
- **Конфиденциальность - Описание использования поставщика ТВ** (`NSVideoSubscriberAccountUsageDescription`) — позволяет разработчику описывают, почему приложение хочет получить доступ к учетной записи пользователя ТВ поставщика.

Дополнительные сведения о работе с `Info.plist` ключи, см. в разделе Apple [справочника по ключам список свойств сведения](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009248-SW1).

<a name="Setting-Privacy-Keys" />

## <a name="setting-privacy-keys"></a>Ключи параметров конфиденциальности

Рассмотрим следующий пример доступа к HomeKit на iOS 10 (и более поздней версии), разработчику придется добавить `NSHomeKitUsageDescription` ключа в приложение `Info.plist` файл и предоставить объявление строки, почему приложение хочет получить доступ к базе данных HomeKit пользователя. Эта строка будет выводиться при первом запуске приложения:

[![](security-privacy-images/info01.png "Пример оповещения NSHomeKitUsageDescription")](security-privacy-images/info01.png#lightbox)

# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

Xamarin.iOS для текущей Visual Studio не поддерживает редактирование улучшение безопасности `Info.plist` параметры в Интегрированной среде разработки, потребуется следующий обходной путь:

1. Откройте `Info.plist` файл во внешнем текстовом редакторе.
2. Перед удалением последней `</dict>` узел, добавьте следующий узел: `<key>NSHomeKitUsageDescription</key>`
3. Добавьте следующий узел для описания необходимых: `<string>Allows the app to control HomeKit enabled devices.</string>`
4. `Info.plist` Файл должен выглядеть следующим образом: 

    [![](security-privacy-images/info02vs.png "Файл Info.plist должен выглядеть следующим образом")](security-privacy-images/info02vs.png#lightbox)
4. Сохраните изменения в файле.
5. Вернитесь в Visual Studio и перекомпиляции в приложение.

# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

Чтобы задать, какой-либо конфиденциальности, выполните следующее:

1. Дважды щелкните `Info.plist` файла в **обозревателе решений** чтобы открыть его для редактирования.
2. В нижней части экрана, перейдите в **источника** представления.
3. Добавьте новый **входа** в список.
4. Из раскрывающегося списка выберите ключ конфиденциальности (например, **конфиденциальность - Описание использования HomeKit**): 

    [![](security-privacy-images/info02.png "Выберите ключ конфиденциальности")](security-privacy-images/info02.png#lightbox)
5. Введите описание для почему приложение хочет получить указанные данные компонента или пользователя: 

    [![](security-privacy-images/info03.png "Введите описание")](security-privacy-images/info03.png#lightbox)
6. Сохраните изменения в файле.

-----

> [!IMPORTANT]
> **Примечание:** в примере заданному выше, не удалось задать `NSHomeKitUsageDescription` ключа в `Info.plist` файла приведет к появлению приложения _без вмешательства пользователя со сбоем_ (закрывается в системе во время выполнения) без ошибок, при выполнении в iOS 10 (или "больше").

<a name="Summary" />

## <a name="summary"></a>Сводка

В этой статье был проиллюстрирован безопасности и конфиденциальности изменения, сделанные в iOS 10 и как они влияют на приложения Xamarin.iOS Apple.



## <a name="related-links"></a>Связанные ссылки

- [Примеры операций ввода-вывода 10](https://developer.xamarin.com/samples/ios/iOS10/)
