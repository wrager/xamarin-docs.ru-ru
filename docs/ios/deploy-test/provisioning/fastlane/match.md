---
title: "fastlane для iOS - match"
ms.topic: article
ms.prod: xamarin
ms.assetid: C4A2A67E-0643-4CED-B1A9-79D65054F3CA
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.date: 03/19/2017
ms.openlocfilehash: d92f820e22277148b4de3ff87e3fdaca0f573f52
ms.sourcegitcommit: 0fdb243b46cf21be47584900805cadcd077121bf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2018
---
# <a name="fastlane-for-ios---match"></a>fastlane для iOS - match

Как правило, подготовка устройства осуществляется каждым членом команды разработчиков с помощью Xcode или на портале разработчиков Apple. Этот процесс состоит из нескольких шагов:

- Запрос сертификата разработки
- Добавление устройства на портал
- Создание идентификатора приложения
- Создание профиля подготовки
- Скачивание профилей и сертификатов

Дополнительные сведения об этапах настройки устройства для разработки вручную или с помощью Xcode см. в [руководстве по подготовке устройств](~/ios/get-started/installation/device-provisioning/index.md).

В этом руководстве описано, как использовать средства fastlane вместо Xcode.

## <a name="installation"></a>Установка

Дополнительные сведения об установке fastlane см. в ознакомительном руководстве по [fastlane](~/ios/deploy-test/provisioning/fastlane/index.md#Installation).

<a name="whatismatch" />

## <a name="what-is-match"></a>Что такое match?

match отвечает за создание и обслуживание сертификатов подписи кода и профилей подготовки, а также позволяет разработчикам iOS и совместно использовать одно удостоверение подписывания кода для всех разработчиков.

При развертывании приложения в App Store, бета-тестировании или установке приложения на устройство каждому участнику команды разработчиков предоставляется его собственное удостоверение подписывания. Это может вызвать конфликты между идентификаторами и профилями, а также привести к необходимости вручную создавать, выполнять циклические сдвиги и управлять профилями и идентификаторами приложений.

Вместо этого match создает и обслуживает все сертификаты и профили за вас и сохраняет их в закрытый репозитории git. Таким образом, все разработчики в команде используют одни и те же учетные данные. В свою очередь это обеспечивает дополнительную безопасность для сертификатов: помимо добавления в закрытый репозиторий git, они также шифруются с использованием [парольной фразы](#passphrase). Хранение артефактов подписи кода в репозитории позволяет агентам команды и администраторам обновлять и выполнять циклический сдвиг по мере необходимости. Это обеспечивает экономию времени, затрачиваемого на распространение новых сертификатов каждому разработчику.

> [!IMPORTANT]
> Сейчас match не поддерживает корпоративные профили для внутреннего использования.

<a name="initializing" />

## <a name="initializing-your-project-with-match"></a>Инициализация проекта с помощью match

Если вы являетесь администратором команды, создайте закрытый репозиторий git с помощью github.com или bitbucket.com и добавьте всех участников команды в качестве соавторов для этого репозитория.

С помощью терминала перейдите в каталог проекта и выполните следующую команду:

    fastlane match init

Когда будет предложено, введите URL-адрес репозитория git:

 [![](match-images/fastlane-image7.png "Введите URL-адрес репозитория git")](match-images/fastlane-image7.png#lightbox)

URL-адрес можно найти и скопировать, нажав кнопку **Clone or Download** (Клонировать или скачать) на сайте github.com, как показано ниже:

[![](match-images/fastlane-image6.png "URL-адрес под кнопкой "Клонировать или скачать" на сайте github.com")](match-images/fastlane-image6.png#lightbox)

После инициализации проекта создается matchfile — текстовый файл, в который можно внести изменения, чтобы передать инструменту match переменные среды. Пример matchfile показан ниже:

[![](match-images/fastlane-image8.png "Пример matchfile")](match-images/fastlane-image8.png#lightbox)

<a name="running" />

## <a name="running-match"></a>Выполнение match

> [!NOTE]
> При использовании fastlane рекомендуется очистить перед первым запуском match существующие профили и сертификаты с помощью [команды match nuke](#using).

В зависимости от среды можно использовать любую из следующих команд, чтобы создать новый сертификат и профиль подготовки, а затем сохранить их в новом репозитории git:

    fastlane match appstore

    fastlane match adhoc

    fastlane match development

Помимо создания новых сертификатов и профилей, при выполнении любой из этих команд в репозиторий git будут добавлены (или обновлены, если они уже существуют) следующие элементы:

- Папка сертификатов
- Папка профилей
- Файл readme с основными инструкциями
- Версия match

[![](match-images/fastlane-image9.png "Структура проекта в репозитории git")](match-images/fastlane-image9.png#lightbox)

Профили подготовки устанавливаются в `~/Library/MobileDevice/Provisioning Profiles`. Сертификаты и закрытые ключи устанавливаются непосредственно в цепочку ключей.

<a name="using" />

### <a name="using-the-nuke-command"></a>Использование команды `nuke`

Если у вас имеются беспорядочные сертификаты, можно использовать `nuke` для отзыва сертификатов и профилей для каждой среды с помощью следующих команд:

    fastlane match nuke

Отзыв всех сертификатов и профилей подготовки для конкретной среды:

    fastlane match nuke development

 или

    fastlane match nuke distribution

Перед удалением fastlane проверит файлы для удаления.

<a name="passphrase" />

### <a name="passphrase"></a>Парольная фраза

При первом выполнении `match` будет предложено задать парольную фразу для репозитория git. Запомните пароль, поскольку он потребуется при запуске match на другом компьютере. Это позволяет организовать дополнительный уровень защиты: все файлы будут зашифрованы с помощью OpenSSL. При каждом последующем выполнении `match` на новой машине будет предлагаться ввести эту парольную фразу — после первого ввода она добавляется в локальную цепочку ключей.

Чтобы задать парольную фразу для расшифровки профилей с помощью переменной среды, используйте `MATCH_PASSWORD`.

<a name="options" />

## <a name="additional-options"></a>Дополнительные параметры

Для получения дополнительной поддержки при работе с match можно использовать следующие параметры:

- Используйте флаг `-–help` для отображения списка всех доступных команд:

        fastlane match cert --help

- Используйте флаг `-–verbose`, чтобы увеличить уровень детализации выходных данных:

        fastlane match --development --verbose

- Используйте флаг `--force_for_new_devices` для принудительного обновления профилей подготовки в случае изменения количества устройств на портале разработчика

        fastlane match development --force_for_new_devices

## <a name="related-links"></a>Связанные ссылки

- [fastlane — match](https://github.com/fastlane/fastlane/blob/master/match/README.md)
