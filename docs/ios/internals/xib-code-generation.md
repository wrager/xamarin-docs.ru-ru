---
title: "Создание кода .xib"
ms.topic: article
ms.prod: xamarin
ms.assetid: 365991A8-E07A-0420-D28E-BC4D32065E1A
ms.technology: xamarin-ios
author: bradumbaugh
ms.author: brumbaug
ms.date: 03/21/2017
ms.openlocfilehash: 7d320b3fc40c852c337e5fd1e9bda4e90920cf70
ms.sourcegitcommit: cc38757f56aab53bce200e40f873eb8d0e5393c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2018
---
# <a name="xib-code-generation"></a>Создание кода .xib

> [!IMPORTANT]
>  В этом документе объясняется Visual Studio для Mac в интеграции с построитель интерфейса в Xcode, как действия и выходов не используются в конструкторе Xamarin для операций ввода-вывода. Дополнительные сведения о конструкторе iOS см. в статье [iOS конструктор](~/ios/user-interface/designer/index.md) документа.

Средство Apple интерфейс построителя («IB») используется для визуальной разработки пользовательского интерфейса. Определения интерфейса, созданные IB сохраняются в **.xib** файлов. Мини-приложений и других объектов в **.xib** файлов может присваиваться «класс удостоверение», который может быть пользовательский определяемого пользователем типа. Это позволяет настроить поведение мини-приложений и записи пользовательских средств визуализации.

Эти пользовательские классы обычно являются подклассами классов контроллеров пользовательского интерфейса. Они имеют *торговцам* (аналогично свойства) и *действия* (аналогично событий), можно подключить к объектам интерфейса. Во время выполнения при загрузке файла IB объекты создаются и выходов и действия подключены в различные объекты пользовательского интерфейса динамически. При определении этих управляемых классов, необходимо определить все действия и выходов для сопоставления те, которые ожидает IB. Visual Studio для Mac используется модель фонового кода like для упрощения этого процесса. Это похоже на назначение Xcode для Objective-C, но модели создания кода и соглашения слегка было изменить для более привычными для разработчиков .NET.

Работа с **.xib** файлов не поддерживается в настоящее время в Xamarin.iOS для Visual Studio.

## <a name="xib-files-and-custom-classes"></a>файлы .xib и пользовательские классы

А также с помощью существующих типов из Cocoa Touch, можно определить пользовательские типы в **.xib** файлов. Можно также использовать типы, определенные в других **.xib** файлы, а также определенные исключительно в коде C#. В настоящее время интерфейс построителя неизвестно о сведениях типы, определенные вне текущей **.xib** файл, поэтому не будет их в списке и показать их пользовательские выходов и действия. Удалить это ограничение планируется в будущем.

Пользовательские классы могут быть определены в **.xib** текстовый файл с помощью команды «Добавить подкласс» на вкладке «Классы» интерфейс построителя. Мы называем их как классы «Фонового кода». Если **.xib** файл имеет «. xib.designer.cs» аналог файл в проект, а затем Visual Studio для Mac будет автоматически заполнить его определения разделяемых классов для пользовательских классов в **.xib**. Мы называем эти разделяемые классы «конструктора классов».

## <a name="generating-code"></a>Генерирование кода

Для любого **{0} .xib** файл с действием построения *страницы*, если **{0}.xib.designer.cs** файл также существует в проекте, Visual Studio для Mac создаст разделяемые классы в файл конструктора для всех пользовательских классов, его можно найти в **.xib** файл со свойствами для выпусков и частичных методов для всех действий. Создание кода просто обеспечивается наличие этого файла.

Этот файл конструктора является автоматически обновляется, когда **.xib** -файле изменения и Visual Studio для Mac снова получит фокус. Этот файл конструктора его не следует изменять вручную, как изменения будут перезаписаны при очередном Visual Studio для Mac обновления файла.

## <a name="registration-and-namespaces"></a>Пространства имен и регистрации

Visual Studio для Mac создает классы конструктора, с помощью имен проекта по умолчанию для расположения файла конструктора, чтобы сделать его совместимым с обычной namespacing проекта .NET. Пространство имен файлов конструктора определяется проекта «пространство имен по умолчанию» и его параметры «.NET именования политики». Имейте в виду, что при изменении имен проекта по умолчанию MD приведет к повторному созданию классов в новое пространство имен, поэтому может оказаться, что ваш разделяемые классы больше не совпадает.

Чтобы класс мог быть обнаружен средой выполнения Objective-C, Visual Studio для Mac применяет `[Register (name)]` к классу атрибут. Несмотря на то, что Xamarin.iOS автоматически регистрирует `NSObject`-производные классы, он использует .NET полные имена. Имя, используемое в зарегистрирован этот атрибут применяется средой Visual Studio для Mac, для того, каждый класс переопределяет **.xib** файла. При использовании пользовательских классов IB без использования Visual Studio для Mac, необходимо создать файлы конструктора, может потребоваться применить его вручную, чтобы сделать соответствовать ожидаемым имена классов Objective-C управляемых классов.

Классы не могут определяться в более чем один **.xib**, или они конфликтуют.

## <a name="non-designer-class-parts"></a>Части класса без конструктора

Конструктор разделяемые классы не предназначены для использования в качестве-является. Выходы являются закрытыми, а базовый класс не указан. Предполагается, что каждый класс будет иметь соответствующий класс «не конструктор» часть в другой файл, который задает базовый класс, с помощью или предоставляет розетки и определяет конструкторы, которые необходимы для создания экземпляра класса из машинного кода при загрузке **.xib**. Значение по умолчанию **.xib** шаблоны сделать это, но для любых дополнительных пользовательских классов, определять в **.xib**, необходимо вручную добавить компонент не конструктора.

Причиной этого является необходимость гибкость. Например несколько классов CodeBehind удалось обычное управляемых абстрактный класс, какие подклассами класса, для которого создаются подклассы IB подкласс.

Это обычный, чтобы поместить их в **{0}.xib.cs** файла рядом с **{0}.xib.designer.cs** файл конструктора.

<a name="generated" />

## <a name="generated-actions-and-outlets"></a>Созданные действия и выходов

В разделяемых классах конструктора Visual Studio для Mac создает свойства, соответствующие любого подключенного выходов, определенные в IB и разделяемые методы, соответствующие действиям подключенных.

### <a name="outlet-properties"></a>Свойства выхода

Классы конструктора содержат свойства, соответствующие все выходы, определенные для пользовательского класса. Тот факт, что они являются свойствами является деталях реализации Xamarin.iOS мост Objective C для обеспечения отложенной привязки. Следует быть эквивалентными закрытым полям, предназначен для использования только из класса фонового кода. Если вы хотите сделать их общедоступными, добавление свойства метода доступа к части без конструктора класса, как закрытое поле.

Если свойства розетки определяются типом `id` (эквивалентно `NSObject`), а затем в настоящее время определяет сильные возможных типов, в зависимости от объектов, которые подключены к данной розетки для удобства, генератор кода конструктора.
Тем не менее это может не поддерживаться в будущих версиях, поэтому рекомендуется явно строгой типизации розетки, при определении пользовательского класса.

### <a name="action-properties"></a>Свойства действия

Классы конструктора содержат разделяемые методы, соответствующие все действия, определенные для пользовательского класса. Это методы без реализации. Разделяемые методы служит две причины:

1.  Если ввести `partial` в теле класса части класса без конструктора Visual Studio для Mac будет предлагать автозаполнения подписи всех разделяемых методов, отличных от реализации.
2.  Сигнатуры разделяемого метода иметь применен атрибут, который предоставляет их во всем мире Objective-C, поэтому они обрабатываются как соответствующее действие.


При желании может игнорировать разделяемого метода и выполнения действий путем применения атрибута с другим методом или разрешить ему переходить к базовому классу.

Если действия определяются типом отправителя `id` (эквивалентно `NSObject`), а затем генератор кода конструктора в настоящее время определяет сильные возможных типов, в зависимости от объектов, которые подключены к данному действию. Тем не менее это может не поддерживаться в будущих версиях, поэтому рекомендуется явно строгой типизации действия, при определении пользовательского класса.

Обратите внимание, что эти разделяемые методы создаются только для C#, поскольку CodeDOM не поддерживает разделяемые методы, поэтому они не создаются для других языков.

## <a name="cross-xib-class-usage"></a>Использование класса XIB между

Иногда пользователи хотят ссылаться на тот же класс из нескольких **.xib** файлы, например с контроллерами вкладки. Это можно сделать путем явно, ссылки на определение класса из другого **.xib** файла, либо определив то же имя класса еще раз в течение секунды **.xib**.

В последнем случае может привести к проблемам из-за Visual Studio для Mac обработки **.xib** файлы по отдельности. Не может автоматически обнаруживать и слияния дублированные определения, может оказаться с конфликтами применение атрибута регистра несколько раз, когда тот же разделяемый класс определен в нескольких файлах конструктора. Последние версии Visual Studio для Mac попытаться устранить эту проблему, но он может не всегда работать должным образом. В будущем это скорее всего, не поддерживается, и вместо этого Visual Studio для Mac сделает все типы, определенные во всех **.xib** файлы и управляемого кода в проекте виден непосредственно из всех **.xib** файлов.

## <a name="type-resolution"></a>Разрешения типа

Типы, используемые в IB, имена типов C к цели деятельности организации. Они сопоставлены с типами CLR, за счет использование атрибутов регистра. При создании кода выхода и действие, Visual Studio для Mac устраните соответствующие типы CLR для всех типов Objective-C, оболочкой для которого ядро Xamarin.iOS и полные имена типов.

Тем не менее, генератор кода не удается разрешить в настоящее время типы CLR из имен типов Objective-C в пользовательском коде или в библиотеках, поэтому в таких случаях он выводит verbatim имя типа. Это означает, что соответствующий тип CLR должен иметь имя, совпадающее с именем типа Objective-C и находиться в том же пространстве имен, как код, который использует его. Планируется, это будет исправлено некоторое время в будущем, учитывая все типы Objective-C в проекте во время создания кода.
